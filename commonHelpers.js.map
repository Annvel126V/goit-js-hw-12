{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\n\nimport axios from \"axios\";\n\nconst URL = \"https://pixabay.com/api/\"; \nconst API_KEY = \"45110935-91aa782eb5f23a60393d7a38c\";\n\nexport const searchImages = async (query, page = 1, perPage = 15) => {\n    \n    try {\n        const response = await axios.get(URL, {\n  \n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: perPage\n            },\n    \n   \n        });\n\n        return response.data\n    } catch (error) {\n        throw new Error(error.response ? error.response.data : error.message);\n       \n        \n    }\n};","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport function showError(error) {\n    iziToast.error({\n        position: \"topRight\",\n        message: `${error}`,\n    });\n}\n\n\nexport function createImages(data) {\n    const list = document.querySelector(\".gallery-list\");\n    const lightbox = new SimpleLightbox('.gallery-list a', { \n      captions: true,\n      captionType: 'attr',\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      captionDelay: 250\n     });\n    \n  const images = data.hits.map((hit) =>\n    `<div class=\"image-frame\">\n  <a href=\"${hit.largeImageURL}\">\n  <img class=\"image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" /></a>\n  <div class =\"text-gallery\">\n  <div class=\"text-block\">\n  <h5>likes</h5>\n  <p>${hit.likes}</p>\n  </div>\n  <div class=\"text-block\">\n  <h5>views</h5>\n  <p>${hit.views}</p>\n  </div>\n  <div class=\"text-block\">\n  <h5>comments</h5>\n  <p>${hit.comments}</p>\n  </div>\n  <div class=\"text-block\">\n  <h5>downloads</h5>\n  <p>${hit.downloads}</p>\n  </div>\n  </div>\n  </div>`)\n    .join(\"\");\n    list.insertAdjacentHTML(\"beforeend\", images);\n    lightbox.refresh();\n}\n\nexport const cleanGallery = () => {\n  document.querySelector('.gallery-list').innerHTML = '';\n};\n\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n// Описаний у документації\n\n\nimport { searchImages } from \"./js/pixabay-api.js\";\nimport { createImages, showError, cleanGallery } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".gallery-form\");\nconst input = document.querySelector(\".input-for-gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".btn-load-more\");\n\nlet currentPage = 1;\nconst resultsPerPage = 15;\nlet currentQuery = \"\";\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    currentPage = 1;\n    currentQuery = input.value.trim();\n\n    cleanGallery(); \n    loadMoreBtn.classList.add('hidden');\n    await performSearch()\n});\n\n\nloadMoreBtn.addEventListener('click', () => {\n    currentPage++;\n    performSearch();\n    });\n\n\nasync function performSearch() {\n  loader.classList.remove('hidden'); \n\n    if (currentQuery === '') {\n    showError('Please enter a search query.');\n    loader.classList.add(\"hidden\");\n    return;\n    }\n\n    try {\n    const data = await searchImages(currentQuery, currentPage, resultsPerPage);\n    if (data.total === 0) {\n        showError('Sorry, there are no images matching your search query. Please try again!');\n    } else {\n        \n        if (currentPage > 1) {\n            const galleryHeightB = document.querySelector('.gallery-list').getBoundingClientRect().height;\n        createImages(data);\n        const galleryHeightA = document.querySelector('.gallery-list').getBoundingClientRect().height;\n        console.log(document.querySelector('.gallery-list').getBoundingClientRect())\n        window.scrollBy({\n            top: (galleryHeightA - galleryHeightB)*0.6,\n            behavior: 'smooth'\n        });\n        } else {\n            createImages(data);\n        }\n        if (data.hits.length < resultsPerPage) { \n        loadMoreBtn.classList.add('hidden'); \n        } else {\n            if (data.totalHits > ( currentPage * resultsPerPage)) {\n                loadMoreBtn.classList.remove('hidden'); \n            } else {\n                \n                    loadMoreBtn.classList.add('hidden'); \n                    return iziToast.info({\n                    position: \"topRight\",\n                    message: \"We're sorry, but you've reached the end of search results.\"\n                });\n            }\n        }\n    }\n    } catch (error) {\n    showError(error.message);\n    } finally {\n    loader.classList.add(\"hidden\"); \n        input.value = '';\n    }\n}\n"],"names":["URL","API_KEY","searchImages","query","page","perPage","axios","error","showError","iziToast","createImages","data","list","lightbox","SimpleLightbox","images","hit","cleanGallery","form","input","loader","loadMoreBtn","currentPage","resultsPerPage","currentQuery","event","performSearch","galleryHeightB","galleryHeightA"],"mappings":"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"}